# Runtime Errors

Complete reference for TP7 runtime errors (RTE 1-231) with FPC mappings.

## Sources
- DOS error codes (1-170): Microsoft DOS Programmer's Reference, INT 21h error codes; Ralf Brown's Interrupt List.
- TP7 runtime errors (200-231): Borland Turbo Pascal 7.0 User's Guide, "Run-Time Error Messages" chapter.
- FPC equivalents: Free Pascal RTL documentation (rtl.txt, SysUtils unit reference).

## Coverage Plan
- TP7 error number, description, and cause.
- FPC equivalent or differing behaviors.
- Notes on enabling/disabling checks (range, I/O, overflow).

## Examples to Highlight
- RTE 200: `Delay` calibration overflow on fast CPUs (TP7); FPC `Delay` uses host timers and avoids the bug.
- RTE 201: Range check error; present only when `{$R+}` is enabled.
- RTE 202: Stack overflow; tune `{$M}` in TP7 or OS/linker stack size in FPC.

## Quick Mapping (TP7 ↔ FPC 3.2.2)
Note: TP7 reports runtime errors by number; FPC without SysUtils also sets `ExitCode`
and emits the same numbers. With `SysUtils` in scope, FPC raises exceptions
(`EInOutError`, `ERangeError`, etc.) but `ExitCode` still matches.

| TP7/FPC RTE | Description                               | Notes                                          |
|-------------|-------------------------------------------|------------------------------------------------|
| 1           | Invalid function number                   | MsDos/Intr call with bad AH or unsupported API; check INT params. Source: DOS INT 21h error 01h. |
| 2           | File not found                            | Reset/Rewrite/Append on missing path; ensure 8.3 names under TP7. Source: DOS INT 21h error 02h. |
| 3           | Path not found                            | Directory missing; create/mount path before access. Source: DOS INT 21h error 03h. |
| 4           | Too many open files                       | Close handles; increase FILES= (TP7/DOS) or OS handle limit. Source: DOS INT 21h error 04h. |
| 5           | File access denied                        | Read-only/share violation; ensure mode/attributes are correct. Source: DOS INT 21h error 05h. |
| 6           | Invalid file handle                       | Read/Write/Close on unassigned or already-closed file. Source: DOS INT 21h error 06h. |
| 7           | Memory control blocks destroyed (DOS)     | DOS heap corruption; rare outside TP7/DOS. Source: DOS INT 21h error 07h. |
| 8           | Not enough memory                         | DOS could not allocate; TP7 may surface during low-level calls. Source: DOS INT 21h error 08h. |
| 9           | Invalid memory block address              | Bad block handle passed to DOS; indicates memory corruption. Source: DOS INT 21h error 09h. |
| 10          | Invalid environment                       | DOS environment segment missing/damaged. Source: DOS INT 21h error 0Ah. |
| 11          | Invalid format                            | Bad EXE/COM format on Exec; verify path/binary. Source: DOS INT 21h error 0Bh. |
| 12          | Invalid file access code                  | Wrong mode for Reset/Rewrite/Append; check file type/options. Source: DOS INT 21h error 0Ch. |
| 13          | Data invalid                              | Bad parameter to a DOS call; verify registers/args. Source: DOS INT 21h error 0Dh. |
| 14          | Reserved (DOS)                            | DOS INT 21h error 0Eh; not generated by TP7 runtime. |
| 15          | Invalid drive number                      | Drive letter missing/not mounted. Source: DOS INT 21h error 0Fh. |
| 16          | Cannot remove current directory           | `RmDir` on active working directory. Source: DOS INT 21h error 10h. |
| 17          | Cannot rename across drives               | Same-drive rename only; copy/delete otherwise. Source: DOS INT 21h error 11h. |
| 18          | No more files                             | `FindNext` past last match; end iteration. Source: DOS INT 21h error 12h. |
| 19          | Reserved (DOS)                            | DOS INT 21h error 13h; write-protect (overlaps 150). |
| 20          | Reserved (DOS)                            | DOS INT 21h error 14h; unknown unit (overlaps 151). |
| 21          | Reserved (DOS)                            | DOS INT 21h error 15h; drive not ready (overlaps 152). |
| 22          | Reserved (DOS)                            | DOS INT 21h error 16h; unknown command (overlaps 153). |
| 23          | Reserved (DOS)                            | DOS INT 21h error 17h; CRC error (overlaps 154). |
| 24          | Reserved (DOS)                            | DOS INT 21h error 18h; bad request length (overlaps 155). |
| 25          | Reserved (DOS)                            | DOS INT 21h error 19h; seek error (overlaps 156). |
| 26          | Reserved (DOS)                            | DOS INT 21h error 1Ah; unknown media (overlaps 157). |
| 27          | Reserved (DOS)                            | DOS INT 21h error 1Bh; sector not found (overlaps 158). |
| 28          | Reserved (DOS)                            | DOS INT 21h error 1Ch; printer out of paper (overlaps 159). |
| 29          | Reserved (DOS)                            | DOS INT 21h error 1Dh; write fault (overlaps 160). |
| 30          | Reserved (DOS)                            | DOS INT 21h error 1Eh; read fault (overlaps 161). |
| 31          | Reserved (DOS)                            | DOS INT 21h error 1Fh; general failure (overlaps 162). |
| 32          | Reserved (DOS)                            | DOS INT 21h error 20h; sharing violation (overlaps 163). |
| 33          | Reserved (DOS)                            | DOS INT 21h error 21h; lock violation (overlaps 164). |
| 34          | Reserved (DOS)                            | DOS INT 21h error 22h; invalid disk change. |
| 35          | Reserved (DOS)                            | DOS INT 21h error 23h; FCB unavailable. |
| 36          | Reserved (DOS)                            | DOS INT 21h error 24h; sharing buffer overflow. |
| 37          | Reserved (DOS)                            | DOS INT 21h error 25h; code page mismatch. |
| 38          | Reserved (DOS)                            | DOS INT 21h error 26h; cannot complete file op (EOF). |
| 39          | Reserved (DOS)                            | DOS INT 21h error 27h; insufficient disk space (overlaps 165). |
| 40–49       | Reserved (DOS)                            | DOS INT 21h errors 28h–31h; not generated by TP7. |
| 50          | Reserved (DOS)                            | DOS INT 21h error 32h; network request not supported. |
| 51          | Reserved (DOS)                            | DOS INT 21h error 33h; remote computer not listening. |
| 52          | Reserved (DOS)                            | DOS INT 21h error 34h; duplicate name on network. |
| 53          | Reserved (DOS)                            | DOS INT 21h error 35h; network name not found. |
| 54          | Reserved (DOS)                            | DOS INT 21h error 36h; network busy. |
| 55          | Reserved (DOS)                            | DOS INT 21h error 37h; network device no longer exists. |
| 56          | Reserved (DOS)                            | DOS INT 21h error 38h; NetBIOS command limit exceeded. |
| 57          | Reserved (DOS)                            | DOS INT 21h error 39h; network adapter hardware error. |
| 58          | Reserved (DOS)                            | DOS INT 21h error 3Ah; incorrect response from network. |
| 59          | Reserved (DOS)                            | DOS INT 21h error 3Bh; unexpected network error. |
| 60          | Reserved (DOS)                            | DOS INT 21h error 3Ch; incompatible remote adapter. |
| 61          | Reserved (DOS)                            | DOS INT 21h error 3Dh; print queue full. |
| 62          | Reserved (DOS)                            | DOS INT 21h error 3Eh; not enough space for print file. |
| 63          | Reserved (DOS)                            | DOS INT 21h error 3Fh; print file deleted. |
| 64          | Reserved (DOS)                            | DOS INT 21h error 40h; network name deleted. |
| 65          | Reserved (DOS)                            | DOS INT 21h error 41h; network access denied. |
| 66          | Reserved (DOS)                            | DOS INT 21h error 42h; network device type incorrect. |
| 67          | Reserved (DOS)                            | DOS INT 21h error 43h; network name not found. |
| 68          | Reserved (DOS)                            | DOS INT 21h error 44h; network name limit exceeded. |
| 69          | Reserved (DOS)                            | DOS INT 21h error 45h; NetBIOS session limit exceeded. |
| 70          | Reserved (DOS)                            | DOS INT 21h error 46h; temporarily paused. |
| 71          | Reserved (DOS)                            | DOS INT 21h error 47h; network request not accepted. |
| 72          | Reserved (DOS)                            | DOS INT 21h error 48h; print/disk redirection paused. |
| 73–79       | Reserved (DOS)                            | DOS INT 21h errors 49h–4Fh; not generated by TP7. |
| 80          | Reserved (DOS)                            | DOS INT 21h error 50h; file exists. |
| 81          | Reserved (DOS)                            | DOS INT 21h error 51h. |
| 82          | Reserved (DOS)                            | DOS INT 21h error 52h; cannot make directory entry. |
| 83          | Reserved (DOS)                            | DOS INT 21h error 53h; fail on INT 24h. |
| 84          | Reserved (DOS)                            | DOS INT 21h error 54h; too many redirections. |
| 85          | Reserved (DOS)                            | DOS INT 21h error 55h; duplicate redirection. |
| 86          | Reserved (DOS)                            | DOS INT 21h error 56h; invalid password. |
| 87          | Reserved (DOS)                            | DOS INT 21h error 57h; invalid parameter. |
| 88          | Reserved (DOS)                            | DOS INT 21h error 58h; network write fault. |
| 89          | Reserved (DOS)                            | DOS INT 21h error 59h; function not supported by network. |
| 90          | Reserved (DOS)                            | DOS INT 21h error 5Ah; required component not installed. |
| 91–99       | Reserved (DOS)                            | DOS INT 21h errors 5Bh–63h; not generated by TP7. |
| 100         | Disk read error                           | Media/read failure; retry or handle gracefully. |
| 101         | Disk write error                          | Write failed (media/bad sector/permission). |
| 102         | File not assigned                         | Missing `Assign` before `Reset/Rewrite`; applies to Text/typed/untyped. |
| 103         | File not open                             | Operation after `Close` or before open. |
| 104         | File not open for input                   | Read on file opened for output only. |
| 105         | File not open for output                  | Write on file opened for input only. |
| 106         | Invalid numeric format (I/O)              | `ReadLn`/`Read` failed to parse number. |
| 107–149     | Reserved (TP7)                            | Reserved by TP7; not generated by runtime. |
| 150         | Disk is write-protected                   | Remove write-protect or adjust media. Source: DOS critical error 00h. |
| 151         | Unknown unit                              | Device/unit error from DOS driver. Source: DOS critical error 01h. |
| 152         | Drive not ready                           | No disk/media not ready. Source: DOS critical error 02h. |
| 153         | Unknown command                           | Device driver rejected request. Source: DOS critical error 03h. |
| 154         | CRC error in data                         | Data/sector CRC failure. Source: DOS critical error 04h. |
| 155         | Bad drive request structure length        | Device driver error. Source: DOS critical error 05h. |
| 156         | Disk seek error                           | Seek failed; media/driver issue. Source: DOS critical error 06h. |
| 157         | Unknown media type                        | Unrecognized format. Source: DOS critical error 07h. |
| 158         | Sector not found                          | Out-of-range sector. Source: DOS critical error 08h. |
| 159         | Printer out of paper                      | Check printer state. Source: DOS critical error 09h. |
| 160         | Device write fault                        | Device I/O failure on write. Source: DOS critical error 0Ah. |
| 161         | Device read fault                         | Device I/O failure on read. Source: DOS critical error 0Bh. |
| 162         | Hardware failure                          | Generic device failure. Source: DOS critical error 0Ch. |
| 163         | Sharing violation                         | Share mode conflict on open. Source: DOS critical error. |
| 164         | Lock violation                            | Locking conflict on file region. Source: DOS critical error. |
| 165         | Disk full                                 | No space left; delete/truncate before retry. Source: DOS INT 21h error 27h. |
| 166         | End of file                               | Read past end (text/typed/untyped). |
| 167         | Device not available                      | Device missing/busy. |
| 168         | Disk swap failure                         | Removable media swap failed. |
| 169         | OfficeTalk task swap                      | Rare; specific to OfficeTalk environments. |
| 170         | Disk full (alternate)                     | Alternate full-space indication. |
| 200         | Division by zero                          | Integer/FP div by zero; TP7 `Delay` bug triggers this on fast CPUs. FPC `Delay` avoids it. Source: TP7 User's Guide. |
| 201         | Range check error (`{$R+}`)               | Array/subrange overflow with `{$R+}` enabled (TP7 default off); FPC raises `ERangeError` when SysUtils is used. Source: TP7 User's Guide. |
| 202         | Stack overflow                            | Deep recursion/large locals; raise `{$M}` (TP7) or OS stack. Source: TP7 User's Guide. |
| 203         | Heap overflow                             | `GetMem/New` failed; `MaxAvail` too small; FPC raises `EHeapMemoryError`; TP7 can hook `HeapError`. Source: TP7 User's Guide. |
| 204         | Invalid pointer operation                 | Dispose/Free on invalid/double pointer; FPC raises `EInvalidPointer`; TP7 often due to uninitialized pointer. Source: TP7 User's Guide. |
| 205         | Floating point overflow                   | FP value outside range; check FPU mask/rounding. Source: TP7 User's Guide. |
| 206         | Floating point underflow                  | Result underflowed to zero/denormal. Source: TP7 User's Guide. |
| 207         | Invalid floating point operation          | NaN/invalid op (e.g., sqrt(-1) without correction). Source: TP7 User's Guide. |
| 208         | Overlay manager error                     | TP7 overlay system error; overlay file/initialization issue. Source: TP7 User's Guide. |
| 209         | Overlay manager error                     | TP7 overlay system error; segment/fixup problem. Source: TP7 User's Guide. |
| 210         | Object not initialized                    | Method on nil/uninitialized object; call constructor first. FPC-only unless using OOP extensions. Source: TP7 User's Guide. |
| 211         | Call to abstract method                   | Abstract method invoked; supply override. FPC-only unless using OOP extensions. Source: TP7 User's Guide. |
| 212         | Stream registration error                 | Class not registered for streaming (rare). FPC-only unless using OOP extensions. Source: TP7 User's Guide. |
| 213         | Collection index out of range             | Bounds error on collection/list index. FPC-only unless using OOP extensions. Source: TP7 User's Guide. |
| 214         | Arithmetic overflow (`{$Q+}`)             | Integer overflow with `{$Q+}`; FPC raises `EIntOverflow`. Source: TP7 User's Guide. |
| 215         | Access violation                          | Nil/invalid pointer deref; FPC raises `EAccessViolation`. Source: TP7 User's Guide. |
| 216         | General protection fault                  | Fatal fault (often nil pointer) in TP7 real mode. Source: TP7 User's Guide. |
| 217         | Unhandled exception (FPC)                 | Unhandled exception propagated; FPC-only. Source: FPC RTL docs. |
| 218         | Invalid variant operation (FPC/Delphi-only) | Variant op invalid; not available in TP7. Source: FPC RTL docs. |
| 219         | Invalid variant typecast (FPC/Delphi-only) | Variant cast failed; not available in TP7. Source: FPC RTL docs. |
| 220         | Variant array create (FPC/Delphi-only)   | Variant array alloc failed; not available in TP7. Source: FPC RTL docs. |
| 221         | Variant array index out of bounds (FPC/Delphi-only) | Variant array bounds error; not available in TP7. Source: FPC RTL docs. |
| 222         | Variant array locked (FPC/Delphi-only)   | Variant array locked; not available in TP7. Source: FPC RTL docs. |
| 223         | Variant not an array (FPC/Delphi-only)   | Wrong variant kind; not available in TP7. Source: FPC RTL docs. |
| 224         | Variant type conversion (FPC/Delphi-only) | Conversion failed; not available in TP7. Source: FPC RTL docs. |
| 225         | Variant type coercion (FPC/Delphi-only)  | Coercion failed; not available in TP7. Source: FPC RTL docs. |
| 226         | Overflow converting variant to string (FPC/Delphi-only) | String conversion overflow; not available in TP7. Source: FPC RTL docs. |
| 227         | Assertion failed (FPC/Delphi-only)       | `Assert` with `{$C+}`/`{$ASSERTIONS ON}`; FPC raises `EAssertionFailed`; TP7 has no `Assert`. Source: FPC RTL docs. |
| 228         | Safecall error (FPC/Delphi-only)         | COM/safecall error; not available in TP7. Source: FPC RTL docs. |
| 229         | Exception stack corrupted (FPC/Delphi-only) | Exception frame damaged; not available in TP7. Source: FPC RTL docs. |
| 230         | Timeout (FPC-only)                       | e.g., `ReadKey` timeout in `Crt`; not available in TP7. Source: FPC RTL docs. |
| 231         | Exception handling error (FPC/Delphi-only) | Exception system failure; not available in TP7. Source: FPC RTL docs. |

### Notes
- OS-derived codes (1–99, 150–170) mirror the DOS/TP7 manual meanings; check target OS docs when in doubt.
- DOS-only codes 7–13 surface rarely (memory/env errors from INT 21h); they map directly to DOS error codes if TP7 forwards `DosError`/`ExitCode`. Codes 14 and 19–99 are unused/reserved in TP7.
- **Overlay errors (TP7)**: Codes 208–209 are TP7 overlay manager errors; they only surface when using `{$O+}` overlays.
- FPC raises exceptions (`EInOutError`, `ERangeError`, etc.) when `SysUtils` is used, but `ExitCode` remains the runtime error number (matches TP7 table).
- Common `SysUtils` mappings in FPC: `EInOutError` (IO errors 2–106), `ERangeError` (201), `EHeapMemoryError` (203), `EInvalidPointer` (204), `EIntOverflow` (214), `EAccessViolation` (215), `EAssertionFailed` (227).
- **TP7 lacks modern OOP/variant features**: Codes 218–231 are FPC/Delphi-only; TP7 has no `Assert`, variants, safecall, or advanced exception handling.
- See also: `GLOSSARY.md` for exception class names; `reference/UNITS-REFERENCE.md` (System/SysUtils) for unit-level behaviors.
- TP7-specific: `Delay` bug maps to RTE 200; overlays (errors 208–209) and CRT timing quirks do not change the error numbers. Fast CPUs + unpatched CRT require a patched `CRT.TPU` or throttled DOSBox.
- FPC-specific: `SysUtils` enables exceptions; in TP mode without `SysUtils`, RTE numbers stay inline with TP7. Timeout (230) and exception-stack errors (229/231) surface only under exception-enabled builds.

### Usage tips
- With `{$I-}`, always call `IOResult` after file I/O to clear error state.
- In FPC, `SysUtils` converts runtime errors to exceptions; `ExitCode` preserves
  the number for cross-checks with TP7 listings.
- When debugging TP7 issues like `Delay` overflow (RTE 200), use the same inputs
  in FPC and compare `ExitCode` to confirm parity.

### Debugging with checks enabled
- To surface silent wraparounds, compile/run with `{$R+}{$Q+}`:

Compatibility: TP7, FPC TP
```pascal
{$IFDEF FPC}{$MODE TP}{$ENDIF}
{$R+}{$Q+}
var
  S: SmallInt;
begin
  S := 32767;
  Inc(S);  { Triggers RTE 201 (Range check error) }
end.
```

- Under `SysUtils`, the same code raises `ERangeError` but `ExitCode` remains 201.
